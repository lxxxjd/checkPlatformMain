(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{hHF1:function(e,a,l){"use strict";l.r(a);var t,r,n,s,i=l("jehZ"),o=l.n(i),d=l("p0pE"),c=l.n(d),m=l("2Taf"),u=l.n(m),p=l("vZ4D"),b=l.n(p),E=l("l4Ni"),h=l.n(E),f=l("ujKo"),C=l.n(f),g=l("MhPg"),v=l.n(g),y=l("q1tI"),w=l.n(y),F=l("MuoO"),I=l("Y2fQ"),V=l("bmkC"),M=l("zHco"),S=l("wd/R"),k=l.n(S),D=l("glGN"),q=l.n(D),U=V["Form"].Item,O=V["Select"].Option,x=V["Form"].create()(function(e){var a=e.modalVisible,l=e.form,t=e.handleEdit,r=e.handleModalVisible,n=e.modalInfo,s=(e.dispatch,function(){l.validateFields(function(e,a){e||(l.resetFields(),t(a,n))})});return w.a.createElement(V["Modal"],{destroyOnClose:!0,title:"\u7528\u6237\u4fe1\u606f\u4fee\u6539",style:{top:10},visible:a,onOk:s,onCancel:function(){return r()}},w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u540d"},l.getFieldDecorator("username",{initialValue:n.username,rules:[{required:!0,message:Object(I["formatMessage"])({id:"validation.username.required"})}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",disabled:!0}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5bc6\u7801"},l.getFieldDecorator("password",{initialValue:n.password,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u624b\u673a"},l.getFieldDecorator("tel",{initialValue:n.tel,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u53ef\u89c1\u6027"},l.getFieldDecorator("isvisible",{initialValue:n.isvisible,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u624b\u673a\u53ef\u89c1\u6027"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u9009\u62e9\u53ef\u89c1\u6027",style:{width:"100%"}},w.a.createElement(O,{value:"\u53ef\u89c1"},"\u53ef\u89c1"),w.a.createElement(O,{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u516c\u53f8"},l.getFieldDecorator("company",{initialValue:n.company,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u53f8"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u89d2\u8272"},l.getFieldDecorator("role",{initialValue:n.role,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",style:{width:"100%"}},w.a.createElement(O,{value:"\u5ba1\u6838\u8001\u5e08"},"\u5ba1\u6838\u8001\u5e08"),w.a.createElement(O,{value:"\u7ba1\u7406\u5458"},"\u7ba1\u7406\u5458")))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba1\u6838\u72b6\u6001"},l.getFieldDecorator("ispass",{initialValue:n.ispass,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6838\u72b6\u6001"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6838\u72b6\u6001",style:{width:"100%"}},w.a.createElement(O,{value:"\u901a\u8fc7"},"\u901a\u8fc7"),w.a.createElement(O,{value:"\u4e0d\u901a\u8fc7"},"\u4e0d\u901a\u8fc7")))))}),j=V["Form"].create()(function(e){var a=e.addModalVisible,l=e.form,t=e.handleAdd,r=e.addHandleModalVisible,n=e.dispatch,s=function(){l.validateFields(function(e,a){e||(l.resetFields(),t(a))})},i=function(e,a,l){n({type:"CnasUser/getRepeatUsername",payload:{username:a},callback:function(e){void 0===e||"error"===e?l(Object(I["formatMessage"])({id:"validation.userExist.error"})):"repeat"===e?l(Object(I["formatMessage"])({id:"validation.userExist.repeated"})):l()}})};return w.a.createElement(V["Modal"],{destroyOnClose:!0,title:"\u7528\u6237\u4fe1\u606f\u65b0\u589e",style:{top:10},visible:a,onOk:s,onCancel:function(){return r()}},w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7528\u6237\u540d"},l.getFieldDecorator("username",{rules:[{required:!0,message:Object(I["formatMessage"])({id:"validation.username.required"})},{validator:i}]})(w.a.createElement(V["Input"],{size:"large",placeholder:Object(I["formatMessage"])({id:"form.username.placeholder"})}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5bc6\u7801"},l.getFieldDecorator("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u59d3\u540d"},l.getFieldDecorator("nameC",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u624b\u673a"},l.getFieldDecorator("tel",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u53ef\u89c1\u6027"},l.getFieldDecorator("isvisible",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u624b\u673a\u53ef\u89c1\u6027"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u9009\u62e9\u53ef\u89c1\u6027",style:{width:"100%"}},w.a.createElement(O,{value:"\u53ef\u89c1"},"\u53ef\u89c1"),w.a.createElement(O,{value:"\u4e0d\u53ef\u89c1"},"\u4e0d\u53ef\u89c1")))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u516c\u53f8"},l.getFieldDecorator("company",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u516c\u53f8"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8"}))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u89d2\u8272"},l.getFieldDecorator("role",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",style:{width:"100%"}},w.a.createElement(O,{value:"\u5ba1\u6838\u8001\u5e08"},"\u5ba1\u6838\u8001\u5e08"),w.a.createElement(O,{value:"\u7ba1\u7406\u5458"},"\u7ba1\u7406\u5458")))),w.a.createElement(U,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba1\u6838\u72b6\u6001"},l.getFieldDecorator("ispass",{initialValue:"\u901a\u8fc7",rules:[{required:!0,message:"\u8bf7\u5ba1\u6838"}]})(w.a.createElement(V["Select"],{placeholder:"\u8bf7\u5ba1\u6838",style:{width:"100%"}},w.a.createElement(O,{value:"\u901a\u8fc7"},"\u901a\u8fc7"),w.a.createElement(O,{value:"\u4e0d\u901a\u8fc7"},"\u4e0d\u901a\u8fc7")))))}),H=(t=Object(F["connect"])(function(e){var a=e.CnasUser,l=e.loading;return{CnasUser:a,loading:l.models.CnasUser}}),r=V["Form"].create(),t(n=r((s=function(e){function a(){var e,l;u()(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return l=h()(this,(e=C()(a)).call.apply(e,[this].concat(r))),l.state={modalVisible:!1,addModalVisible:!1,modalInfo:{},dataSource:[]},l.columns=[{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u5bc6\u7801",dataIndex:"password"},{title:"\u59d3\u540d",dataIndex:"nameC"},{title:"\u624b\u673a\u53ef\u89c1\u6027",dataIndex:"isvisible"},{title:"\u7535\u8bdd",dataIndex:"tel"},{title:"\u516c\u53f8",dataIndex:"company"},{title:"\u89d2\u8272",dataIndex:"role"},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"ispass"},{title:"\u64cd\u4f5c",render:function(e,a){return w.a.createElement(y["Fragment"],null,w.a.createElement("a",{onClick:function(){return l.modifyItem(e,a)}},"\u4fee\u6539"),"\xa0\xa0",w.a.createElement("a",{onClick:function(){return l.deleteItem(e,a)}},"\u5220\u9664"))}}],l.init=function(){var e=l.props.dispatch,a={};e({type:"CnasUser/getCnasUserList",payload:a,callback:function(e){e&&(l.state.dataSource=e.data)}})},l.handleFormReset=function(){var e=l.props.form;e.resetFields(),l.init()},l.handleSearch=function(e){e.preventDefault();var a=l.props,t=a.dispatch,r=a.form;r.validateFields(function(e,a){if(!e){var r={kind:a.kind.trim(),value:a.value.trim()};t({type:"CnasUser/getCnasUserList",payload:r,callback:function(e){e&&(l.state.dataSource=e.data)}})}})},l.isValidDate=function(e){return void 0!==e&&null!==e?w.a.createElement("span",null,k()(e).format("YYYY-MM-DD")):[]},l.modifyItem=function(e){l.setState({modalInfo:e}),l.handleModalVisible(!0)},l.deleteItem=function(e){var a=l.props.dispatch,t=c()({},e);a({type:"CnasUser/deleteCnasUser",payload:t,callback:function(e){"success"===e?(l.init(),V["message"].success("\u5220\u9664\u6210\u529f")):V["message"].success("\u5220\u9664\u5931\u8d25")}})},l.addItem=function(){l.addHandleModalVisible(!0)},l.handleModalVisible=function(e){l.setState({modalVisible:!!e})},l.addHandleModalVisible=function(e){l.setState({addModalVisible:!!e})},l.handleEdit=function(e,a){var t=l.props.dispatch,r=a;r.username=e.username,r.password=e.password,r.isvisible=e.isvisible,r.tel=e.tel,r.company=e.company,r.role=e.role,r.nameC=e.nameC,r.ispass=e.ispass;var n=c()({},r);t({type:"CnasUser/updateCnasUser",payload:n,callback:function(e){"success"===e?(V["message"].success("\u4fdd\u5b58\u6210\u529f"),l.init()):V["message"].success("\u4fdd\u5b58\u5931\u8d25")}}),l.setState({modalVisible:!1})},l.handleAdd=function(e){var a=l.props.dispatch,t=c()({},e);l.setState({addModalVisible:!1}),l.state.dataSource.find(function(a){return a.username===e.username})?V["message"].success("\u6dfb\u52a0\u7528\u6237\u5df2\u5b58\u5728"):a({type:"CnasUser/addCnasUser",payload:t,callback:function(e){"success"===e?(V["message"].success("\u4fdd\u5b58\u6210\u529f"),l.init()):V["message"].success("\u4fdd\u5b58\u5931\u8d25")}})},l}return v()(a,e),b()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return w.a.createElement(V["Form"],{onSubmit:this.handleSearch,layout:"inline"},w.a.createElement(V["Row"],{gutter:{md:8,lg:24,xl:48}},w.a.createElement(V["Col"],{md:3,sm:20},w.a.createElement(V["Form"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"username",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(w.a.createElement(V["Select"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},w.a.createElement(O,{value:"username"},"\u7528\u6237\u540d"),w.a.createElement(O,{value:"nameC"},"\u59d3\u540d"),w.a.createElement(O,{value:"password"},"\u5bc6\u7801"),w.a.createElement(O,{value:"isvisible"},"\u7535\u8bdd\u53ef\u89c1\u6027"),w.a.createElement(O,{value:"tel"},"\u7535\u8bdd"),w.a.createElement(O,{value:"company"},"\u516c\u53f8\u540d\u79f0"))))),w.a.createElement(V["Col"],{md:6,sm:20},w.a.createElement(U,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(w.a.createElement(V["Input"],{placeholder:"\u8bf7\u8f93\u5165"})))),w.a.createElement(V["Col"],{md:8,sm:20},w.a.createElement("span",{className:q.a.submitButtons},w.a.createElement(V["Button"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),w.a.createElement(V["Button"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),w.a.createElement(V["Button"],{type:"primary",style:{marginLeft:8},onClick:this.addItem},"\u65b0\u589e")))))}},{key:"render",value:function(){var e=this.props,a=e.loading,l=e.dispatch,t=this.state,r=t.modalVisible,n=t.modalInfo,s=t.addModalVisible,i=t.dataSource,d={handleEdit:this.handleEdit,handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,addHandleModalVisible:this.addHandleModalVisible};return w.a.createElement(M["a"],null,w.a.createElement(V["Card"],{bordered:!1,size:"small"},w.a.createElement("div",{className:q.a.tableList},w.a.createElement(x,o()({},d,{modalVisible:r,modalInfo:n,dispatch:l})),w.a.createElement(j,o()({},d,{addModalVisible:s,dispatch:l})),w.a.createElement("div",{className:q.a.tableListForm},this.renderSimpleForm()),w.a.createElement(V["Table"],{size:"middle",loading:a,dataSource:i,columns:this.columns,rowKey:"itemno",pagination:{showQuickJumper:!0,showSizeChanger:!0}}))))}}]),a}(y["PureComponent"]),n=s))||n)||n);a["default"]=H}}]);