(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{glgc:function(e,t,a){"use strict";a.r(t);a("2qtc");var n,o,r,c,l,i,s,d=a("kLXV"),m=(a("6UJt"),a("DFOY")),u=(a("5NDa"),a("5rEg")),p=(a("IzEo"),a("bx4M")),g=(a("g9YV"),a("wCAj")),h=a("p0pE"),f=a.n(h),y=(a("/xke"),a("TeRw")),C=a("2Taf"),v=a.n(C),k=a("vZ4D"),E=a.n(k),b=a("l4Ni"),I=a.n(b),S=a("ujKo"),w=a.n(S),D=a("MhPg"),O=a.n(D),M=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),F=a.n(A),J=a("MuoO"),L=a("usdK"),x=a("zHco"),R=a("wd/R"),Y=a.n(R),q=a("glGN"),j=a.n(q),z=(a("14J3"),a("BMrR")),V=(a("+L6B"),a("2/Rp")),K=(a("jCWc"),a("kPKH")),P=a("rvFD"),T=a.n(P),B=N["a"].Item,H=(M["a"].Option,n=Object(J["connect"])(function(e){var t=e.dict,a=e.loading;return{dict:t,loading:a.models.dict}}),n((r=function(e){function t(){var e,a;v()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=I()(this,(e=w()(t)).call.apply(e,[this].concat(o))),a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields();var o=JSON.parse(localStorage.getItem("userinfo")),r={certCode:o.certCode};n({type:"dict/getCargos",payload:r})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,o=t.form;o.validateFields(function(e,t){if(!e){var a=JSON.parse(localStorage.getItem("userinfo")),o=f()({},t,{certCode:a.certCode});n({type:"dict/searchCargos",payload:o})}})},a}return O()(t,e),E()(t,[{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.showAdd;return F.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline",hideRequiredMark:!0,labelAlign:"left"},F.a.createElement(z["a"],{gutter:{md:8,lg:24,xl:48}},F.a.createElement(K["a"],{span:6},F.a.createElement(B,{label:"\u68c0\u67e5\u54c1\u540d",labelCol:{span:8},wrapperCol:{span:16},colon:!1},t("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(F.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),F.a.createElement(K["a"],{md:8,sm:20},F.a.createElement("span",{className:T.a.submitButtons},F.a.createElement(V["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),F.a.createElement(V["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),F.a.createElement(V["a"],{type:"primary",style:{marginLeft:8},onClick:a},"\u65b0\u589e")))))}}]),t}(A["PureComponent"]),o=r))||o),Q=H,G=(N["a"].Item,M["a"].Option,N["a"].create()(Q)),U=(c=Object(J["connect"])(function(e){var t=e.dict,a=e.loading;return{dict:t,loading:a.models.dict}}),l=N["a"].create(),c(i=l((s=function(e){function t(){var e,a;v()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=I()(this,(e=w()(t)).call.apply(e,[this].concat(o))),a.state={visible:!1,modalInfo:{},keyno:null,cnsOptions:[]},a.columns=[{title:"\u68c0\u67e5\u54c1\u540d",dataIndex:"cargonamec"},{title:"\u82f1\u6587\u540d",dataIndex:"cargonamee"},{title:"\u8d27\u7269\u5206\u7c7b",dataIndex:"cargosort"},{title:"CNS\u7f16\u7801",dataIndex:"checkCode"},{title:"\u64cd\u4f5c",render:function(e,t){return F.a.createElement(A["Fragment"],null,F.a.createElement("a",{onClick:function(){return a.previewItem(e,t)}},"\u67e5\u770b\u6307\u6807"),"\xa0\xa0",F.a.createElement("a",{onClick:function(){return a.modifyItem(e,t)}},"\u4fee\u6539"),"\xa0\xa0",F.a.createElement("a",{onClick:function(){return a.deleteItem(e,t)}},"\u5220\u9664"))}}],a.deleteItem=function(e){var t=a.props.dispatch;t({type:"dict/deleteCargo",payload:{keyno:e.keyno},callback:function(e){200===e.code?(y["a"].open({message:"\u5220\u9664\u6210\u529f"}),a.componentDidMount()):y["a"].open({message:"\u5220\u9664\u5931\u8d25",description:e.message})}})},a.isValidDate=function(e){return void 0!==e&&null!==e?F.a.createElement("span",null,Y()(e).format("YYYY-MM-DD")):[]},a.previewItem=function(e){sessionStorage.setItem("cargoname",e.cargonamec),L["a"].push({pathname:"/Cargo/ItemList"})},a.modifyItem=function(e){var t=a.props.form;a.setState({visible:!0}),a.setState({keyno:e.keyno});var n=[];n.push(e.checkCode.substring(0,2)),n.push(e.checkCode.substring(0,4)),n.push(e.checkCode),t.setFieldsValue({cargonamec:e.cargonamec,cargonamee:e.cargonamee,checkCode:n})},a.handleOk=function(){var e=a.props,t=e.form.validateFieldsAndScroll,n=e.dispatch,o=a.state.keyno;t(function(e,t){var r=JSON.parse(localStorage.getItem("userinfo"));t.checkCode=t.checkCode[2],e||n(null!==o?{type:"dict/updateCargo",payload:f()({},t,{keyno:o,certCode:r.certCode}),callback:function(e){200===e.code?(y["a"].open({message:"\u4fee\u6539\u6210\u529f"}),a.componentDidMount(),a.setState({visible:!1})):y["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.message})}}:{type:"dict/addCargo",payload:f()({},t,{certCode:r.certCode}),callback:function(e){200===e.code?(y["a"].open({message:"\u6dfb\u52a0\u6210\u529f"}),a.componentDidMount(),a.setState({visible:!1})):y["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:e.message})}})})},a.showAdd=function(){a.setState({keyno:null}),a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a}return O()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a={};t({type:"dict/getCargos",payload:a}),t({type:"cnas/getCnasLevelInfo",payload:{},callback:function(t){t&&(e.state.cnsOptions=t)}})}},{key:"render",value:function(){var e=this.props,t=e.dict.cargos,a=e.loading,n=(e.dispatch,e.form.getFieldDecorator),o=this.state.visible,r={showAdd:this.showAdd,componentDidMount:this.componentDidMount};return F.a.createElement(x["a"],null,F.a.createElement(p["a"],{bordered:!1,size:"small"},F.a.createElement("div",{className:j.a.tableListForm},F.a.createElement(G,r)),F.a.createElement("div",{className:j.a.tableList},F.a.createElement(g["a"],{style:{marginTop:10},size:"middle",loading:a,dataSource:t,columns:this.columns,rowKey:"cargonamec",pagination:{showQuickJumper:!0,showSizeChanger:!0}}))),F.a.createElement(d["a"],{title:"\u4fee\u6539\u8d27\u7269\u4fe1\u606f",visible:o,onOk:this.handleOk,onCancel:this.handleCancel},F.a.createElement(N["a"],null,F.a.createElement(N["a"].Item,{label:"\u68c0\u67e5\u54c1\u540d"},n("cargonamec",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u5305\u5b9e\u9a8c\u5ba4"}]})(F.a.createElement(u["a"],null))),F.a.createElement(N["a"].Item,{label:"\u82f1\u6587\u540d"},n("cargonamee",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u603b\u8ba1\u8d39\u7528"}]})(F.a.createElement(u["a"],null))),F.a.createElement(N["a"].Item,{label:"\u9009\u62e9CNAS\u5206\u7c7b"},n("checkCode",{rules:[{required:!0,message:"\u9009\u62e9CNAS\u5206\u7c7b"}]})(F.a.createElement(m["a"],{options:this.state.cnsOptions,placeholder:"\u9009\u62e9CNAS\u5206\u7c7b"}))))))}}]),t}(A["PureComponent"]),i=s))||i)||i);t["default"]=U}}]);